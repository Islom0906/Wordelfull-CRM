"use strict";(self.webpackChunkwonderfullcity_crm=self.webpackChunkwonderfullcity_crm||[]).push([[759],{4268:(e,s,a)=>{a.d(s,{A:()=>i});a(5043);var t=a(289),n=a(6558),r=a(579);const i=e=>{let{label:s,name:a,required:i,required_text:l,warning:o}=e;return(0,r.jsx)(t.A.Item,{label:o?(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:s}),(0,r.jsx)("br",{}),(0,r.jsx)("p",{children:o})]}):(0,r.jsx)("div",{children:s}),name:a,rules:[{required:i,message:l}],children:(0,r.jsx)(n.A,{})})}},9759:(e,s,a)=>{a.r(s),a.d(s,{default:()=>S});var t=a(5043),n=a(289),r=a(8193),i=a(9800),l=a(1645),o=a(525),d=a(1802),c=a(2907),u=a(9888),m=a(8710),f=a(3216),h=a(4556),p=a(6213),g=a(4268),x=a(6178),A=a.n(x),y=a(579);const j={name:"",finishedDate:""},S=()=>{const[e]=n.A.useForm(),s=(0,f.Zp)(),{editId:a}=(0,h.d4)((e=>e.editData)),x=(0,h.wA)(),[S,v]=(0,t.useState)("2024-03-06T09:34:52.723Z");console.log(S);const{mutate:D,data:b,isLoading:w,isSuccess:F}=(0,c.useMutation)((e=>{let{url:s,data:a}=e;return u.A.postData(s,a)}),{onSuccess:()=>{r.Ay.success("Success")},onError:e=>{for(let s in e.response.data)r.Ay.error("".concat(s,": ").concat(e.response.data[s]))}}),{isLoading:E,data:I,refetch:V,isSuccess:q}=(0,c.useQuery)(["edit-slot",a],(()=>u.A.getDataByID("/Slot",a)),{enabled:!1}),{mutate:C,isLoading:L,data:_,isSuccess:k}=(0,c.useMutation)((e=>{let{url:s,data:a,id:t}=e;return u.A.editData(s,a,t)}),{onSuccess:()=>{r.Ay.success("Success")},onError:e=>{for(let s in e.response.data)r.Ay.error("".concat(s,": ").concat(e.response.data[s]))}});(0,t.useEffect)((()=>{k&&x({type:p.aT,payload:""}),(F||k)&&s("/slot")}),[b,_]),(0,t.useEffect)((()=>{""!==a&&V()}),[a]),(0,t.useEffect)((()=>{""===a&&e.setFieldsValue(j)}),[]),(0,t.useEffect)((()=>{if(q){const s={name:null===I||void 0===I?void 0:I.name,finishedDate:null===I||void 0===I?void 0:I.finishedDate};v(null===I||void 0===I?void 0:I.finishedDate),e.setFieldsValue(s)}}),[I]);(0,t.useEffect)((()=>{const s=JSON.parse(localStorage.getItem("myFormValues"));s&&(s.images=[],e.setFieldsValue(s));const a=()=>{localStorage.setItem("myFormValues",JSON.stringify(e.getFieldsValue()))};return window.addEventListener("beforeunload",a),()=>{localStorage.removeItem("editDataId"),localStorage.removeItem("myFormValues"),window.removeEventListener("beforeunload",a)}}),[]);return(0,y.jsx)("div",{children:w||E||L?(0,y.jsx)(m.HE,{}):(0,y.jsxs)(n.A,{form:e,name:"basic",labelCol:{span:24},wrapperCol:{span:24},style:{maxWidth:"100%"},initialValues:j,onFinish:e=>{const s={name:e.name,finishedDate:e.finishedDate};q?C({url:"/Slot",data:s,id:a}):D({url:"/Slot/",data:s})},onFinishFailed:e=>{console.log("Failed:",e)},autoComplete:"off",children:[(0,y.jsxs)(i.A,{gutter:20,children:[(0,y.jsx)(l.A,{span:12,children:(0,y.jsx)(g.A,{required:!0,required_text:"\u0422\u0440\u0435\u0431\u0443\u0435\u0442\u0441\u044f \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043b\u043e\u0442\u0430",label:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043b\u043e\u0442\u0430",name:"name"})}),(0,y.jsx)(l.A,{span:12,children:(0,y.jsx)(n.A.Item,{label:"\u0412\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f",name:"finishedDate",rules:[{required:!0,message:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0440\u0435\u043c\u044f \u043e\u043a\u043e\u043d\u0447\u0430\u043d\u0438\u044f."}],children:(0,y.jsx)(o.A,{defaultValue:A()("2015-06-06","DD.MM.YYYY"),disabled:!0,onChange:(e,s)=>{console.log(e._d,s)}})})})]}),(0,y.jsx)(d.A,{type:"primary",htmlType:"submit",style:{width:"100%",marginTop:"20px"},children:q?"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c":"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"})]})})}}}]);
//# sourceMappingURL=759.580f23e5.chunk.js.map